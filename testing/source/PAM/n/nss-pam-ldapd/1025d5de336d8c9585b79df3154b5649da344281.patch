From 1025d5de336d8c9585b79df3154b5649da344281 Mon Sep 17 00:00:00 2001
From: Arthur de Jong <arthur@arthurdejong.org>
Date: Sun, 13 Oct 2019 17:23:20 +0200
Subject: [PATCH] Fix Python 3 compatibility in chsh.ldap

---
 utils/chsh.py   | 6 +++---
 utils/shells.py | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/utils/chsh.py b/utils/chsh.py
index e7537e71..0f24bfcc 100755
--- a/utils/chsh.py
+++ b/utils/chsh.py
@@ -43,11 +43,11 @@
 def ask_shell(oldshell):
     """Ask the user to provide a shell."""
     # Provide Python 2 compatibility
+    prompt = '  Login Shell [%s]: ' % oldshell
     try:
-        input = raw_input
+        shell = raw_input(prompt)
     except NameError:
-        pass
-    shell = input('  Login Shell [%s]: ' % oldshell)
+        shell = input(prompt)
     return shell or oldshell
 
 
diff --git a/utils/shells.py b/utils/shells.py
index 92dba2f2..327b35e7 100644
--- a/utils/shells.py
+++ b/utils/shells.py
@@ -35,7 +35,7 @@ def list_shells():
         shell = getusershell()
         if not shell:
             break
-        yield shell
+        yield shell.decode('utf-8')
     libc.endusershell()
 
 
