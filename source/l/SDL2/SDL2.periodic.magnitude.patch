# HG changeset patch
# User Ethan Lee <flibitijibibo@flibitijibibo.com>
# Date 1544124378 18000
# Node ID 1f8d0b1afe07d1cef54d05b46770ac2c5c8f0c09
# Parent  99d8b18acf8a2a5f8344150ca55c3b3f382bab2f
Linux Haptic: Fix periodic.magnitude value

diff -r 99d8b18acf8a -r 1f8d0b1afe07 src/haptic/linux/SDL_syshaptic.c
--- a/src/haptic/linux/SDL_syshaptic.c	Sat Dec 08 11:22:50 2018 -0800
+++ b/src/haptic/linux/SDL_syshaptic.c	Thu Dec 06 14:26:18 2018 -0500
@@ -801,8 +801,7 @@
         else if (periodic->type == SDL_HAPTIC_SAWTOOTHDOWN)
             dest->u.periodic.waveform = FF_SAW_DOWN;
         dest->u.periodic.period = CLAMP(periodic->period);
-        /* Linux expects 0-65535, so multiply by 2 */
-        dest->u.periodic.magnitude = CLAMP(periodic->magnitude) * 2;
+        dest->u.periodic.magnitude = periodic->magnitude;
         dest->u.periodic.offset = periodic->offset;
         /* Linux phase is defined in interval "[0x0000, 0x10000[", corresponds with "[0deg, 360deg[" phase shift. */
         dest->u.periodic.phase = ((Uint32)periodic->phase * 0x10000U) / 36000;
