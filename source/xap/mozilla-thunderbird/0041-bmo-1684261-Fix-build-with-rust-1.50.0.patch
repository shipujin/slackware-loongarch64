From eb88f36f108a201d531f82789a86a4281f37b3b0 Mon Sep 17 00:00:00 2001
From: Thomas Deutschmann <whissi@gentoo.org>
Date: Sun, 14 Feb 2021 14:57:47 +0100
Subject: [PATCH 41/41] bmo#1684261: Fix build with rust 1.50.0

Signed-off-by: Thomas Deutschmann <whissi@gentoo.org>
---
 .cargo/config.in | 2 +-
 Cargo.lock       | 2 +-
 Cargo.toml       | 4 ++--
 3 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/.cargo/config.in b/.cargo/config.in
index 0ee86efe40..1accd1ef72 100644
--- a/.cargo/config.in
+++ b/.cargo/config.in
@@ -3,9 +3,9 @@
 # Please do not edit.
 
 [source."https://github.com/shravanrn/nix/"]
-branch = "r0.13.1"
 git = "https://github.com/shravanrn/nix/"
 replace-with = "vendored-sources"
+rev = "4af6c367603869a30fddb5ffb0aba2b9477ba92e"
 
 [source."https://github.com/mozilla/rkv"]
 git = "https://github.com/mozilla/rkv"
diff --git a/Cargo.lock b/Cargo.lock
index d6dffc0133..e7b0247088 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -3200,7 +3200,7 @@ dependencies = [
 [[package]]
 name = "nix"
 version = "0.13.1"
-source = "git+https://github.com/shravanrn/nix/?branch=r0.13.1#4af6c367603869a30fddb5ffb0aba2b9477ba92e"
+source = "git+https://github.com/shravanrn/nix/?rev=4af6c367603869a30fddb5ffb0aba2b9477ba92e#4af6c367603869a30fddb5ffb0aba2b9477ba92e"
 dependencies = [
  "bitflags",
  "cc",
diff --git a/Cargo.toml b/Cargo.toml
index 2c162e6567..3173ef840c 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -68,8 +68,8 @@ panic = "abort"
 libudev-sys = { path = "dom/webauthn/libudev-sys" }
 packed_simd = { git = "https://github.com/hsivonen/packed_simd", rev="0917fe780032a6bbb23d71be545f9c1834128d75" }
 rlbox_lucet_sandbox = { git = "https://github.com/PLSysSec/rlbox_lucet_sandbox/", rev="d510da5999a744c563b0acd18056069d1698273f" }
-nix = { git = "https://github.com/shravanrn/nix/", branch = "r0.13.1", rev="4af6c367603869a30fddb5ffb0aba2b9477ba92e" }
-spirv_cross = { git = "https://github.com/kvark/spirv_cross", branch = "wgpu3", rev = "20191ad2f370afd6d247edcb9ff9da32d3bedb9c" }
+nix = { git = "https://github.com/shravanrn/nix/", rev="4af6c367603869a30fddb5ffb0aba2b9477ba92e" }
+spirv_cross = { git = "https://github.com/kvark/spirv_cross", branch = "wgpu3" }
 # failure's backtrace feature might break our builds, see bug 1608157.
 failure = { git = "https://github.com/badboy/failure", rev = "64af847bc5fdcb6d2438bec8a6030812a80519a5" }
 failure_derive = { git = "https://github.com/badboy/failure", rev = "64af847bc5fdcb6d2438bec8a6030812a80519a5" }
-- 
2.30.1

